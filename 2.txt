--// Top-Left Notification System with Executor Detection (Always on Top)
--// Place in StarterPlayerScripts

local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local TextService = game:GetService("TextService")
local UserInputService = game:GetService("UserInputService")

-- GUI Holder
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "Notifier"
ScreenGui.ResetOnSpawn = false
ScreenGui.DisplayOrder = 999999
ScreenGui.Parent = PlayerGui

local Holder = Instance.new("Frame")
Holder.Size = UDim2.new(1, 0, 1, 0)
Holder.Position = UDim2.new(0, 10, 0, 10)
Holder.BackgroundTransparency = 1
Holder.ZIndex = 1/0
Holder.Parent = ScreenGui

local notifications = {}

-- Stack notifications downward
local function ReStack()
    local currentY = 0
    for _, notif in ipairs(notifications) do
        TweenService:Create(notif, TweenInfo.new(0.15, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {
            Position = UDim2.new(0, 10, 0, currentY)
        }):Play()
        currentY = currentY + notif.Size.Y.Offset + 6
    end
end

-- Safe 9-character GID generator
local function GenerateGID()
    local charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"
    local gid = ""
    for i = 1, 9 do
        local index = math.random(1, #charset)
        gid = gid .. charset:sub(index, index)
    end
    return gid
end

-- Executor detection
local executorName = "Unknown Executor"
pcall(function()
    executorName =
        (getexecutorname and getexecutorname())
        or (identifyexecutor and identifyexecutor())
        or executorName
end)

-- Notification function
local function Notify(text, includeServerType)
    if includeServerType then
        local serverStatus = (game.PrivateServerId and game.PrivateServerId ~= "") and "Private server" or "Public server"
        text = text .. " | " .. serverStatus
    end

    local textSize = TextService:GetTextSize(text, 14, Enum.Font.GothamSemibold, Vector2.new(1000, 40))
    local bubbleWidth = math.clamp(textSize.X + 10, 50, 500)

    local Bubble = Instance.new("Frame")
    Bubble.Size = UDim2.new(0, bubbleWidth, 0, 20)
    Bubble.Position = UDim2.new(0, -bubbleWidth, 0, 0)
    Bubble.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Bubble.BackgroundTransparency = 0.75
    Bubble.BorderSizePixel = 0
    Bubble.ClipsDescendants = true
    Bubble.ZIndex = 1/0
    Bubble.Parent = Holder

    Instance.new("UICorner", Bubble).CornerRadius = UDim.new(1, 0)

    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(1, -10, 1, 0)
    Label.Position = UDim2.new(0, 5, 0, 0)
    Label.BackgroundTransparency = 1
    Label.Text = text
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Font = Enum.Font.GothamSemibold
    Label.TextSize = 14
    Label.ZIndex = 1/0
    Label.Parent = Bubble

    table.insert(notifications, 1, Bubble)
    ReStack()

    TweenService:Create(Bubble, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {
        Position = UDim2.new(0, 10, 0, Bubble.Position.Y.Offset)
    }):Play()

    task.delay(5, function()
        local t = TweenService:Create(Bubble, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {
            Position = UDim2.new(0, -bubbleWidth, 0, Bubble.Position.Y.Offset),
            BackgroundTransparency = 1
        })
        t:Play()
        t.Completed:Once(function()
            for i = #notifications, 1, -1 do
                if notifications[i] == Bubble then
                    table.remove(notifications, i)
                    break
                end
            end
            if Bubble then
                Bubble:Destroy()
            end
            ReStack()
        end)
    end)
end

----------------------------------------------------
-- Wait until camera is loaded
----------------------------------------------------
repeat task.wait() until workspace.CurrentCamera

local cam = workspace.CurrentCamera
local resolution = cam.ViewportSize
local resX = math.floor(resolution.X)
local resY = math.floor(resolution.Y)

-- Safe fullscreen detection
local fullscreenText = "Unknown"
pcall(function()
    local v = UserInputService:GetFullscreen()
    fullscreenText = v and "Fullscreen" or "Windowed"
end)

----------------------------------------------------
-- Send Notifications
----------------------------------------------------
local username = LocalPlayer.Name
local gameId = game.PlaceId
local gameName = MarketplaceService:GetProductInfo(gameId).Name
local gid = GenerateGID()
local playerCount = #Players:GetPlayers()
local maxPlayers = Players.MaxPlayers

Notify("Resolution  X: " .. resX .. "  |  Y: " .. resY)
task.wait(0.1)
Notify("Players: " .. playerCount .. "/" .. maxPlayers)
task.wait(0.1)
Notify("Executor: " .. executorName)
task.wait(0.1)
Notify("Game Name: " .. gameName)
task.wait(0.1)
Notify("Game ID: " .. gameId)
task.wait(0.1)
Notify(username .. " Validated", true)
task.wait(0.1)
Notify("Injected to the game successfully")
